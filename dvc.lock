schema: '2.0'
stages:
  get_data:
    cmd: python scripts/data.py
    deps:
    - path: scripts/data.py
      hash: md5
      md5: 2962efaf2f69449741599fe473d95bfb
      size: 1496
    params:
      params.yaml:
        index_col: customer_id
        retrain: true
    outs:
    - path: data/initial_data.csv
      hash: md5
      md5: f83b68dfc1e77ef2029b33bb8e1a528f
      size: 822095
      cloud:
        my_storage:
          etag: f83b68dfc1e77ef2029b33bb8e1a528f
          version_id: 0006393CD5002A6B
  fit_model:
    cmd: python scripts/fit.py
    deps:
    - path: data/initial_data.csv
      hash: md5
      md5: f83b68dfc1e77ef2029b33bb8e1a528f
      size: 822095
    - path: scripts/fit.py
      hash: md5
      md5: 23a074a8ac58fd9563edb7129663b635
      size: 2405
    params:
      params.yaml:
        auto_class_weights: Balanced
        index_col: customer_id
        one_hot_drop: if_binary
        retrain: true
        target_col: target
    outs:
    - path: models/fitted_model.pkl
      hash: md5
      md5: fb00b8db03746adb1f7bf3a9a0f69d7e
      size: 1083543
      cloud:
        my_storage:
          etag: fb00b8db03746adb1f7bf3a9a0f69d7e
          version_id: 0006393DBB30EE22
  evaluate_model:
    cmd: python scripts/evaluate.py
    deps:
    - path: models/fitted_model.pkl
      hash: md5
      md5: fb00b8db03746adb1f7bf3a9a0f69d7e
      size: 1083543
    - path: scripts/evaluate.py
      hash: md5
      md5: eab01fc7ec545b95d1f70eba57da4733
      size: 1572
    params:
      params.yaml:
        index_col: customer_id
        metrics:
        - f1
        - roc_auc
        n_jobs: -1
        n_splits: 13
        retrain: true
        target_col: target
    outs:
    - path: cv_results/cv_res.json
      hash: md5
      md5: e99b325ada0486e9967533fa5248f630
      size: 78
      cloud:
        my_storage:
          etag: e99b325ada0486e9967533fa5248f630
          version_id: 0006393DBB316584
  get_data_progect1:
    cmd: python mle-project-sprint-1-v001/part2_dvc/scripts/data_estate.py
    deps:
    - path: mle-project-sprint-1-v001/.env
      hash: md5
      md5: 5b6f93a1d4d848e59855296f790c112e
      size: 235
    - path: mle-project-sprint-1-v001/part2_dvc/scripts/data_estate.py
      hash: md5
      md5: ae01a6360043d073acb12fb322ff913a
      size: 1902
    outs:
    - path: mle-project-sprint-1-v001/part2_dvc/data/initial_data.csv
      hash: md5
      md5: 7e6c1bbe23e3258853c6608406f38211
      size: 12840563
  fit_progect1:
    cmd: python mle-project-sprint-1-v001/part2_dvc/scripts/fit_estate.py
    deps:
    - path: mle-project-sprint-1-v001/params.yaml
      hash: md5
      md5: d890436333ddf892161c3a70fc3c4484
      size: 275
    - path: mle-project-sprint-1-v001/part2_dvc/data/initial_data.csv
      hash: md5
      md5: 7e6c1bbe23e3258853c6608406f38211
      size: 12840563
    - path: mle-project-sprint-1-v001/part2_dvc/scripts/fit_estate.py
      hash: md5
      md5: 70394ff0fa6c41b17d1ee0d37d411398
      size: 3627
    outs:
    - path: mle-project-sprint-1-v001/part2_dvc/models/price_predictor_model.pkl
      hash: md5
      md5: 2e76bcdc2076c321cc97bb924f591407
      size: 1119223
  evaluate_progect1:
    cmd: python mle-project-sprint-1-v001/part2_dvc/scripts/evaluate_estate.py
    deps:
    - path: mle-project-sprint-1-v001/params.yaml
      hash: md5
      md5: d890436333ddf892161c3a70fc3c4484
      size: 275
    - path: mle-project-sprint-1-v001/part2_dvc/models/price_predictor_model.pkl
      hash: md5
      md5: 2e76bcdc2076c321cc97bb924f591407
      size: 1119223
    - path: mle-project-sprint-1-v001/part2_dvc/scripts/evaluate_estate.py
      hash: md5
      md5: 92bf69e94bacdd2004b85fdfae556591
      size: 3337
    outs:
    - path: mle-project-sprint-1-v001/part2_dvc/cv_results/evaluation_results.json
      hash: md5
      md5: 8c5e202537b508e93bdc6438366d28df
      size: 33
